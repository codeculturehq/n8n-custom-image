# =============================================================================
# n8n Secure Stack - Environment Configuration
# =============================================================================
#
# Copy this file to .env.secure and customize for your deployment:
#   cp docker/.env.secure.example docker/.env.secure
#
# Then run with:
#   docker compose -f docker/docker-compose.secure.yml --env-file docker/.env.secure up -d
#
# =============================================================================

# =============================================================================
# Core n8n Settings
# =============================================================================

# Host and port configuration
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http

# Webhook URL (for external integrations to call back)
# Set this to your public URL if behind a reverse proxy
WEBHOOK_URL=http://localhost:5678/

# Timezone for workflow scheduling
GENERIC_TIMEZONE=UTC

# Logging level (debug, info, warn, error)
N8N_LOG_LEVEL=info

# =============================================================================
# Database Configuration
# =============================================================================

POSTGRES_DB=n8n
POSTGRES_USER=n8n

# IMPORTANT: Change this password in production!
POSTGRES_PASSWORD=n8n_secure_password

# =============================================================================
# Security Secrets
# =============================================================================

# IMPORTANT: Generate these values for production!
#
# Generate encryption key:
#   openssl rand -hex 32
#
# Generate JWT secret:
#   openssl rand -hex 64

# Encryption key for credentials (REQUIRED in production)
N8N_ENCRYPTION_KEY=b9dbb66addb4eb85e3f7bdd3d21fddcea33bd49eca4a6ac2cc434fc066e3c944

# JWT secret for user management (REQUIRED in production)
N8N_JWT_SECRET=f0d3cd7fce7bb37a7fd4be9ec6709676272a93637f439fc755635141233a2fbf5b77bf398d8ab68aba80de757d636bd3d4b38f2157a3bffc5187ea8f09fae3f6

# =============================================================================
# GDPR License Overrides (Enterprise Features)
# =============================================================================
# These require a source-patched build to work

N8N_LICENSE_FORCE_PLAN=Enterprise
N8N_LICENSE_FORCE_FEATURES=feat:sharing,feat:ldap,feat:advancedExecutionFilters,feat:logStreaming,feat:variables,feat:externalSecrets,feat:saml,feat:apiDisabled,feat:auditLogs,feat:binaryDataS3,feat:debugInEditor,feat:sourceControl,feat:workflowHistory,feat:advancedPermissions,feat:projectRole:admin,feat:projectRole:editor,feat:projectRole:viewer,feat:folders
N8N_LICENSE_QUOTA_USERS_LIMIT=-1
N8N_LICENSE_QUOTA_WORKFLOW_HISTORY_PRUNE_LIMIT=-1
N8N_LICENSE_QUOTA_MAX_TEAM_PROJECTS=-1

# =============================================================================
# Optional: SMTP Configuration
# =============================================================================
# Uncomment and configure for password reset emails

# N8N_EMAIL_MODE=smtp
# N8N_SMTP_HOST=smtp.example.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=
# N8N_SMTP_PASS=
# N8N_SMTP_SENDER=n8n@example.com
# N8N_SMTP_SSL=false

# =============================================================================
# Optional: Queue Mode (requires Redis service uncommented in compose file)
# =============================================================================

# EXECUTIONS_MODE=queue
# QUEUE_BULL_REDIS_HOST=redis
# QUEUE_BULL_REDIS_PORT=6379
